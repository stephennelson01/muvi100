<%# Provide Devise locals because weâ€™re rendering outside Devise controllers %>
<% resource       = User.new %>
<% resource_name  = :user %>
<% devise_mapping = Devise.mappings[:user] %>

<!-- The modal element is a TARGET of the body-scoped `modal` controller -->
<div id="auth_modal"
     data-modal-target="container"
     class="hidden fixed inset-0 bg-black/70 z-50 flex items-center justify-center">
  <div class="bg-neutral-900 rounded-xl shadow-xl w-full max-w-md overflow-hidden">
    <!-- Header tabs -->
    <div class="flex border-b border-neutral-800">
      <button data-action="click->modal#showSignIn"
              class="flex-1 py-3 text-center font-semibold text-neutral-300 hover:text-white"
              data-modal-target="signInTab">
        Sign In
      </button>
      <button data-action="click->modal#showSignUp"
              class="flex-1 py-3 text-center font-semibold text-neutral-300 hover:text-white"
              data-modal-target="signUpTab">
        Sign Up
      </button>
    </div>

    <!-- Body -->
    <div class="p-6">
      <!-- Sign In -->
      <turbo-frame id="auth_sign_in" data-modal-target="signInFrame">
        <%= render template: "devise/sessions/new",
                   locals: { resource: resource, resource_name: resource_name, devise_mapping: devise_mapping } %>
      </turbo-frame>

      <!-- Sign Up -->
      <turbo-frame id="auth_sign_up" data-modal-target="signUpFrame" class="hidden">
        <%= render template: "devise/registrations/new",
                   locals: { resource: resource, resource_name: resource_name, devise_mapping: devise_mapping } %>
      </turbo-frame>
    </div>

    <!-- Footer -->
    <div class="p-3 text-right border-t border-neutral-800">
      <button data-action="click->modal#close"
              class="px-4 py-2 rounded bg-neutral-700 hover:bg-neutral-600 text-white font-medium">
        Close
      </button>
    </div>
  </div>
</div>
