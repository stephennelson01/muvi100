<!DOCTYPE html>
<html>
  <head>
    <title>muvi100</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <%= csrf_meta_tags %>
    <%= csp_meta_tag %>

    <!-- Styles -->
    <%= stylesheet_link_tag "tailwind", "data-turbo-track": "reload" %>
    <%= stylesheet_link_tag "auth",    "data-turbo-track": "reload" %>
    <%= stylesheet_link_tag "site",    "data-turbo-track": "reload" %>

    <%= javascript_importmap_tags %>
  </head>

  <body class="bg-neutral-900 text-neutral-100">
    <!-- Header -->
    <header class="navbar">
      <div class="max-w-7xl mx-auto px-4">
        <div class="h-14 flex items-center justify-between gap-3">
          <!-- Brand -->
          <%= link_to root_path, class: "brand", "aria-label": "muvi100 home" do %>
            <span class="brand-badge">M</span>
            <span class="brand-text">
              MUVI <span class="brand-100">100</span>
            </span>
          <% end %>

          <!-- Tabs -->
          <nav class="nav-tabs">
            <% tabs = [
              ["Home",      root_path],
              ["Trending",  trending_path],
              ["Movies",    movies_path],
              ["TV Series", tv_index_path],
              ["Genres",    genres_path],
              ["Anime",     anime_path]
            ] %>
            <% tabs.each do |label, path| %>
              <% active = current_page?(path) %>
              <%= link_to label, path,
                  class: "nav-tab #{'nav-tab--active' if active}",
                  data: { active: active } %>
            <% end %>
          </nav>

          <!-- Search -->
          <%= form_with url: search_path, method: :get, class: "nav-search" do %>
            <input name="q" placeholder="Search movies & TV…" class="nav-input" />
          <% end %>

          <!-- Auth -->
          <div class="flex items-center gap-2">
            <% if user_signed_in? %>
              <!-- White Bookmarks button -->
              <%= link_to "Bookmarks", bookmarks_path,
                    class: "btn btn-white" %>
              <!-- Red Sign out button -->
              <%= button_to "Sign out", destroy_user_session_path,
                    method: :delete,
                    class: "btn btn-red" %>
            <% else %>
              <%= link_to "Sign In", new_user_session_path,  class: "btn btn-grey" %>
              <%= link_to "Sign Up", new_user_registration_path, class: "btn btn-red" %>
            <% end %>
          </div>
        </div>
      </div>
    </header>

    <!-- Page -->
    <main class="py-6">
      <div class="max-w-7xl mx-auto px-4">
        <%= render "shared/flash" %>
        <%= yield %>
      </div>
    </main>

    <!-- Back to top (optional — leave hidden unless you wire controller) -->
    <button class="fixed bottom-5 right-5 h-11 w-11 rounded-full bg-blue-600 text-white shadow-lg hidden">↑</button>

    <footer class="border-t border-neutral-800 py-6 text-center text-sm text-neutral-400">
      © <%= Time.current.year %> muvi100
    </footer>
  </body>
</html>
